{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP%20VICTUS/Downloads/proyectofinal4%20%283%29/lib/simple-auth.ts"],"sourcesContent":["// Storage keys\nconst STORAGE_USER_KEY = 'milaencanto_user'\nconst STORAGE_ROLE_KEY = 'milaencanto_role'\n\ninterface User {\n  uid: string\n  email: string\n  name?: string\n  phone?: string\n  role: 'admin' | 'client'\n  favorites?: number[] // Added favorites array to store product IDs\n}\n\nexport const simpleAuth = {\n  // Mock users for demo\n  demoUsers: {\n    admin: { email: 'admin@milaencanto.com', password: 'admin123', role: 'admin' as const },\n    client: { email: 'cliente@milaencanto.com', password: 'cliente123', role: 'client' as const }\n  },\n\n  register: (email: string, password: string, name: string, phone: string, role: 'admin' | 'client' = 'client'): { success: boolean; error?: string } => {\n    if (!email || !password || !name || !phone) {\n      return { success: false, error: 'Todos los campos son requeridos' }\n    }\n    // In real app, this would call Firebase\n    const user: User = { uid: Date.now().toString(), email, name, phone, role }\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(STORAGE_USER_KEY, JSON.stringify(user))\n      localStorage.setItem(STORAGE_ROLE_KEY, role)\n    }\n    return { success: true }\n  },\n\n  login: (email: string, password: string): { success: boolean; error?: string } => {\n    if (!email || !password) {\n      return { success: false, error: 'Email y contraseÃ±a son requeridos' }\n    }\n    // Demo check\n    const isAdmin = email === simpleAuth.demoUsers.admin.email && password === simpleAuth.demoUsers.admin.password\n    const isClient = email === simpleAuth.demoUsers.client.email && password === simpleAuth.demoUsers.client.password\n\n    if (isAdmin) {\n      const user: User = { uid: '1', email, role: 'admin' }\n      if (typeof window !== 'undefined') {\n        localStorage.setItem(STORAGE_USER_KEY, JSON.stringify(user))\n        localStorage.setItem(STORAGE_ROLE_KEY, 'admin')\n      }\n      return { success: true }\n    } else if (isClient) {\n      const user: User = { uid: '2', email, role: 'client' }\n      if (typeof window !== 'undefined') {\n        localStorage.setItem(STORAGE_USER_KEY, JSON.stringify(user))\n        localStorage.setItem(STORAGE_ROLE_KEY, 'client')\n      }\n      return { success: true }\n    }\n    // For other emails, create a client account\n    const user: User = { uid: Date.now().toString(), email, role: 'client' }\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(STORAGE_USER_KEY, JSON.stringify(user))\n      localStorage.setItem(STORAGE_ROLE_KEY, 'client')\n    }\n    return { success: true }\n  },\n\n  logout: (): void => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(STORAGE_USER_KEY)\n      localStorage.removeItem(STORAGE_ROLE_KEY)\n    }\n  },\n\n  getCurrentUser: (): User | null => {\n    if (typeof window === 'undefined') return null\n    const userStr = localStorage.getItem(STORAGE_USER_KEY)\n    return userStr ? JSON.parse(userStr) : null\n  },\n\n  getCurrentRole: (): 'admin' | 'client' | null => {\n    if (typeof window === 'undefined') return null\n    return (localStorage.getItem(STORAGE_ROLE_KEY) as 'admin' | 'client') || null\n  },\n\n  toggleFavorite: (productId: number): { success: boolean; favorites?: number[] } => {\n    if (typeof window === 'undefined') return { success: false }\n    \n    const userStr = localStorage.getItem(STORAGE_USER_KEY)\n    if (!userStr) return { success: false }\n    \n    const user: User = JSON.parse(userStr)\n    const favorites = user.favorites || []\n    const index = favorites.indexOf(productId)\n    \n    let newFavorites: number[]\n    if (index === -1) {\n      newFavorites = [...favorites, productId]\n    } else {\n      newFavorites = favorites.filter(id => id !== productId)\n    }\n    \n    const updatedUser = { ...user, favorites: newFavorites }\n    localStorage.setItem(STORAGE_USER_KEY, JSON.stringify(updatedUser))\n    \n    return { success: true, favorites: newFavorites }\n  },\n\n  getFavorites: (): number[] => {\n    if (typeof window === 'undefined') return []\n    const userStr = localStorage.getItem(STORAGE_USER_KEY)\n    if (!userStr) return []\n    const user: User = JSON.parse(userStr)\n    return user.favorites || []\n  }\n}\n"],"names":[],"mappings":"AAAA,eAAe;;;;;AACf,MAAM,mBAAmB;AACzB,MAAM,mBAAmB;AAWlB,MAAM,aAAa;IACxB,sBAAsB;IACtB,WAAW;QACT,OAAO;YAAE,OAAO;YAAyB,UAAU;YAAY,MAAM;QAAiB;QACtF,QAAQ;YAAE,OAAO;YAA2B,UAAU;YAAc,MAAM;QAAkB;IAC9F;IAEA,UAAU,CAAC,OAAe,UAAkB,MAAc,OAAe,OAA2B,QAAQ;QAC1G,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO;YAC1C,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAkC;QACpE;QACA,wCAAwC;QACxC,MAAM,OAAa;YAAE,KAAK,KAAK,GAAG,GAAG,QAAQ;YAAI;YAAO;YAAM;YAAO;QAAK;QAC1E;;QAIA,OAAO;YAAE,SAAS;QAAK;IACzB;IAEA,OAAO,CAAC,OAAe;QACrB,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoC;QACtE;QACA,aAAa;QACb,MAAM,UAAU,UAAU,WAAW,SAAS,CAAC,KAAK,CAAC,KAAK,IAAI,aAAa,WAAW,SAAS,CAAC,KAAK,CAAC,QAAQ;QAC9G,MAAM,WAAW,UAAU,WAAW,SAAS,CAAC,MAAM,CAAC,KAAK,IAAI,aAAa,WAAW,SAAS,CAAC,MAAM,CAAC,QAAQ;QAEjH,IAAI,SAAS;YACX,MAAM,OAAa;gBAAE,KAAK;gBAAK;gBAAO,MAAM;YAAQ;YACpD;;YAIA,OAAO;gBAAE,SAAS;YAAK;QACzB,OAAO,IAAI,UAAU;YACnB,MAAM,OAAa;gBAAE,KAAK;gBAAK;gBAAO,MAAM;YAAS;YACrD;;YAIA,OAAO;gBAAE,SAAS;YAAK;QACzB;QACA,4CAA4C;QAC5C,MAAM,OAAa;YAAE,KAAK,KAAK,GAAG,GAAG,QAAQ;YAAI;YAAO,MAAM;QAAS;QACvE;;QAIA,OAAO;YAAE,SAAS;QAAK;IACzB;IAEA,QAAQ;QACN;;IAIF;IAEA,gBAAgB;QACd,wCAAmC,OAAO;;;QAC1C,MAAM;IAER;IAEA,gBAAgB;QACd,wCAAmC,OAAO;;;IAE5C;IAEA,gBAAgB,CAAC;QACf,wCAAmC,OAAO;YAAE,SAAS;QAAM;;;QAE3D,MAAM;QAGN,MAAM;QACN,MAAM;QACN,MAAM;QAEN,IAAI;QAOJ,MAAM;IAIR;IAEA,cAAc;QACZ,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;QAEN,MAAM;IAER;AACF","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP%20VICTUS/Downloads/proyectofinal4%20%283%29/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { simpleAuth } from \"./simple-auth\"\n\ninterface UserData {\n  uid?: string\n  email?: string | null\n  name?: string\n  phone?: string\n  role?: \"admin\" | \"client\"\n}\n\ninterface AuthContextType {\n  user: UserData | null\n  loading: boolean\n  role: \"admin\" | \"client\" | null\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  loading: true,\n  role: null,\n})\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<UserData | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [role, setRole] = useState<\"admin\" | \"client\" | null>(null)\n\n  useEffect(() => {\n    // Load user from localStorage on mount\n    const currentUser = simpleAuth.getCurrentUser()\n    const currentRole = simpleAuth.getCurrentRole()\n    \n    if (currentUser) {\n      setUser(currentUser)\n      setRole(currentRole)\n    }\n    setLoading(false)\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{ user, loading, role }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAJA;;;;AAoBA,MAAM,4BAAc,IAAA,iPAAa,EAAkB;IACjD,MAAM;IACN,SAAS;IACT,MAAM;AACR;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,4OAAQ,EAAkB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4OAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,4OAAQ,EAA4B;IAE5D,IAAA,6OAAS,EAAC;QACR,uCAAuC;QACvC,MAAM,cAAc,8JAAU,CAAC,cAAc;QAC7C,MAAM,cAAc,8JAAU,CAAC,cAAc;QAE7C,IAAI,aAAa;YACf,QAAQ;YACR,QAAQ;QACV;QACA,WAAW;IACb,GAAG,EAAE;IAEL,qBACE,yQAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAK;kBAChD;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,8OAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}}]
}